<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Аудит информационной безопасности - Атомзащитаинформ</title>
  <meta name="description" content="Профессиональный аудит информационной безопасности и пентест от экспертов Атомзащитаинформ. Защитите свой бизнес от киберугроз.">
  <!-- Подключаем Tailwind CSS первым -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Подключаем конфигурацию Tailwind -->
  <script src="../js/tailwind-config.js"></script>
  <!-- Подключаем Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Подключаем пользовательские стили последними -->
  <link href="../css/custom.css" rel="stylesheet">

  <style>
    /* Небольшая локальная правка для терминала */
    .terminal { background: #071017; color: #9be69b; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace; }
    .terminal .title { background: rgba(255,255,255,0.04); padding: .6rem 1rem; border-bottom: 1px solid rgba(255,255,255,0.03); display:flex; gap:.5rem; align-items:center; }
    .dot { width:10px; height:10px; border-radius:999px; background:#e06c75; display:inline-block; }
    .dot.yellow { background:#e5c07b; }
    .dot.green { background:#98c379; }
    .term-scroll { padding:1rem; height:16rem; overflow:hidden; white-space:pre-wrap; }
    .cursor { display:inline-block; width:8px; height:1rem; background:#9be69b; animation: blink 1s steps(2, start) infinite; vertical-align:middle; margin-left:4px;}
    @keyframes blink { 50% { opacity:0 } }
  </style>
</head>
<body class="bg-white text-gray-900">
<!-- Header -->

<div id="header-placeholder"></div>

<!-- Breadcrumbs -->
<section class="bg-gray-50 py-4">
   <!-- Фоновая сетка -->
  <div class="absolute inset-0 h-full w-full bg-transparent bg-[linear-gradient(to_right,#e5e7eb_1px,transparent_1px),linear-gradient(to_bottom,#e5e7eb_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_100%)] opacity-50 -z-10"></div>
  
  <div class="container mx-auto px-6">
    <nav class="text-sm">
      <ol class="flex items-center space-x-2">
        <li><a href="../index.html" class="text-rosatom-blue hover:text-rosatom-light">Главная</a></li>
        <li class="text-gray-400">/</li>
        <li><a href="#" class="text-rosatom-blue hover:text-rosatom-light">Услуги</a></li>
        <li class="text-gray-400">/</li>
        <li class="text-gray-600">Аудит информационной безопасности</li>
      </ol>
    </nav>
  </div>
</section>

<!-- Hero Section -->





<!-- 
  Финальный вариант: «Поиск Аномалий» (Адаптивный)
-->
<section class="bg-slate-50 py-24">
   <!-- Фоновая сетка -->
  <div class="absolute inset-0 h-full w-full bg-transparent bg-[linear-gradient(to_right,#e5e7eb_1px,transparent_1px),linear-gradient(to_bottom,#e5e7eb_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_100%)] opacity-50 -z-10"></div>
  
  <div class="container mx-auto px-6">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
      <!-- Текстовый блок -->
      <div>
        <div class="inline-flex items-center px-4 py-2 bg-rosatom-blue/10 rounded-full text-rosatom-blue text-sm font-medium mb-6">
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
          Профессиональный аудит
        </div>
        <h1 class="text-5xl font-bold mb-6 leading-tight text-rosatom-dark">
          Аудит информационной
          <span class="text-rosatom-blue">безопасности</span>
        </h1>
        <p class="text-xl mb-8 text-gray-600">
          Обеспечим максимальную защиту ваших данных с помощью глубокого анализа систем и процессов.
        </p>
        <div class="flex flex-col sm:flex-row gap-4">
          <a href="#form" class="js-open-modal bg-rosatom-blue hover:bg-rosatom-dark text-white px-8 py-4 rounded-lg font-semibold transition-all transform hover:scale-105">
            Заказать аудит
          </a>
          <a href="#brochure" class="border border-rosatom-blue text-rosatom-blue hover:bg-rosatom-blue hover:text-white px-8 py-4 rounded-lg font-semibold transition-all">
            Скачать брошюру
          </a>
        </div>
      </div>
      
      <!-- Визуализация сканирования в темном окне -->
      <!-- right terminal visualization -->
        <div class="hidden lg:flex justify-center items-center">
          <div class="w-full max-w-md rounded-2xl overflow-hidden shadow-2xl terminal">
            <div class="title">
              <span class="dot"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <div class="ml-auto text-xs text-gray-400">scan.local:~</div>
            </div>
            <div class="term-scroll" id="terminal-output" aria-live="polite"></div>
          </div>
        </div>
    </div>
  </div>
</section>

<!-- Стики сабнавигация -->
<div class="sticky top-0 z-30 border-b bg-white/70 sticky-subnav">
  <div class="container px-6 mx-auto">
    <nav class="flex gap-4 py-3 overflow-x-auto text-sm" aria-label="Внутренняя навигация">
      <a class="px-3 py-2 text-gray-600 rounded-lg hover:text-rosatom-blue focus-ring scroll-link active" href="#details">Возможности</a>
      <a class="px-3 py-2 text-gray-600 rounded-lg hover:text-rosatom-blue focus-ring scroll-link" href="#process">Процесс</a>
      <a class="px-3 py-2 text-gray-600 rounded-lg hover:text-rosatom-blue focus-ring scroll-link" href="#engagement">Форматы</a>
      <a class="px-3 py-2 text-gray-600 rounded-lg hover:text-rosatom-blue focus-ring scroll-link" href="#stack">Инструменты</a>
      <a class="px-3 py-2 text-gray-600 rounded-lg hover:text-rosatom-blue focus-ring scroll-link" href="#compliance">Соответствие</a>
      <a class="px-3 py-2 text-gray-600 rounded-lg hover:text-rosatom-blue focus-ring scroll-link" href="#faq">FAQ</a>
      <a class="js-open-modal px-3 py-2 ml-auto text-white rounded-lg bg-rosatom-blue hover:bg-rosatom-dark focus-ring" href="#brief">Оставить заявку</a>
    </nav>
  </div>
</div>

<!-- Возможности / направления -->
<section id="details" class="py-20 bg-white section-grid-bg">
  <div class="container px-6 mx-auto">
    <div class="mb-16 text-center">
      <h2 class="mb-4 text-4xl font-bold text-rosatom-dark">Аудит ИБ и пентест</h2>
      <p class="max-w-3xl mx-auto text-xl text-gray-600">
        Проверяем защищенность: внешний/внутренний периметр, Web и API, desktop/thick‑client, Wi‑Fi и социнженерия.
        Мобильные и облака — по запросу. Работаем по методологиям, безопасно и прозрачно.
      </p>
    </div>

    <!-- Сетка основных направлений -->
    <div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3">
      <!-- Внешний -->
      <div class="p-8 transition-all transform shadow-lg service-card group rounded-2xl hover:shadow-2xl hover:-translate-y-2">
        <div class="relative flex items-center justify-center w-16 h-16 mb-6 overflow-hidden bg-gradient-to-br from-rosatom-blue to-rosatom-light rounded-2xl shadow-lg ring-1 ring-black/10">
          <div class="absolute inset-0 opacity-60 bg-[radial-gradient(120%_100%_at_0%_0%,rgba(255,255,255,0.55),transparent_55%)]"></div>
          <svg class="relative w-9 h-9" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 3l8 4v5c0 5-4 8-8 9-4-1-8-4-8-9V7l8-4z" stroke="white" stroke-width="1.7" fill="white" fill-opacity=".08" />
            <path d="M8.5 12.5l2.2 2.2 4.8-4.8" stroke="white" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3 class="mb-3 text-xl font-semibold text-rosatom-dark">Пентест внешнего периметра</h3>
        <p class="mb-4 text-gray-600">Имитация атак на внешнюю ИТ-инфраструктуру компании (веб-приложения, серверы, сетевые устройства и т. д.) для выявления уязвимостей, которые могут быть использованы злоумышленниками. Проверяются доступные из интернета системы, чтобы оценить уровень безопасности и предотвратить реальные кибератаки.</p>
      </div>

      <!-- Внутренний/AD -->
      <div class="p-8 transition-all transform shadow-lg service-card rounded-2xl hover:shadow-2xl hover:-translate-y-2">
        <div class="relative flex items-center justify-center w-16 h-16 mb-6 overflow-hidden bg-gradient-to-br from-rosatom-light to-rosatom-blue rounded-2xl shadow-lg ring-1 ring-black/10">
          <div class="absolute inset-0 opacity-60 bg-[radial-gradient(120%_100%_at_0%_0%,rgba(255,255,255,0.55),transparent_55%)]"></div>
          <svg class="relative w-9 h-9" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <circle cx="6" cy="6" r="2.5" stroke="white" stroke-width="1.7"/>
            <circle cx="18" cy="6" r="2.5" stroke="white" stroke-width="1.7"/>
            <circle cx="12" cy="18" r="2.5" stroke="white" stroke-width="1.7"/>
            <path d="M6 8.7V12h12V8.7M12 12v3.3" stroke="white" stroke-width="1.7" stroke-linecap="round"/>
          </svg>
        </div>
        <h3 class="mb-3 text-xl font-semibold text-rosatom-dark">Пентест внутреннего периметра</h3>
        <p class="mb-4 text-gray-600">Проверка безопасности ИТ-инфраструктуры изнутри, имитируя действия злоумышленника, который получил доступ в сеть (например, через фишинг или уязвимость). Тест выявляет слабые места, которые могут привести к утечке данных, распространению вредоносного ПО или полному захвату системы.</p>
      </div>

      <!-- Web/API (+ моб по запросу) -->
      <div class="p-8 transition-all transform shadow-lg service-card rounded-2xl hover:shadow-2xl hover:-translate-y-2">
        <div class="relative flex items-center justify-center w-16 h-16 mb-6 overflow-hidden bg-gradient-to-br from-green-500 to-cyan-400 rounded-2xl shadow-lg ring-1 ring-black/10">
          <div class="absolute inset-0 opacity-60 bg-[radial-gradient(120%_100%_at_0%_0%,rgba(255,255,255,0.55),transparent_55%)]"></div>
          <svg class="relative w-9 h-9" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <rect x="3" y="4" width="18" height="14" rx="2" stroke="white" stroke-width="1.7" fill="white" fill-opacity=".06"/>
            <path d="M3 8h18" stroke="white" stroke-width="1.7" stroke-linecap="round"/>
            <path d="M15.5 12l1.5-1.5M15.5 12l-1.5-1.5M15.5 12l1.5 1.5M15.5 12l-1.5 1.5" stroke="white" stroke-width="1.7" stroke-linecap="round"/>
          </svg>
        </div>
        <h3 class="mb-3 text-xl font-semibold text-rosatom-dark">Пентест Web и API, а также мобльных приложений</h3>
        <p class="mb-4 text-gray-600">OWASP Top‑10/ASVS/API, логические уязвимости, авторизация, защита данных. PoC, рекомендации, ретест по запросу.</p>
      </div>

      <!-- Desktop/Thick-client -->
      <div class="p-8 transition-all transform shadow-lg service-card rounded-2xl hover:shadow-2xl hover:-translate-y-2">
        <div class="relative flex items-center justify-center w-16 h-16 mb-6 overflow-hidden bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl shadow-lg ring-1 ring-black/10">
          <div class="absolute inset-0 opacity-60 bg-[radial-gradient(120%_100%_at_0%_0%,rgba(255,255,255,0.55),transparent_55%)]"></div>
          <svg class="relative w-9 h-9" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <rect x="3" y="5" width="18" height="11" rx="2" stroke="white" stroke-width="1.7"/>
            <path d="M8 19h8M12 16v3" stroke="white" stroke-width="1.7" stroke-linecap="round"/>
          </svg>
        </div>
        <h3 class="mb-3 text-xl font-semibold text-rosatom-dark">Desktop / Thick‑client</h3>
        <p class="mb-4 text-gray-600">Windows/Linux клиенты: перехват трафика, обход TLS‑pinning, анализ IPC/хранилищ, ревёрс ключевых модулей.</p>
      </div>

      <!-- Социнженерия и Wi‑Fi -->
      <div class="p-8 transition-all transform shadow-lg service-card rounded-2xl hover:shadow-2xl hover:-translate-y-2">
        <div class="relative flex items-center justify-center w-16 h-16 mb-6 overflow-hidden bg-gradient-to-br from-purple-500 to-fuchsia-500 rounded-2xl shadow-lg ring-1 ring-black/10">
          <div class="absolute inset-0 opacity-60 bg-[radial-gradient(120%_100%_at_0%_0%,rgba(255,255,255,0.55),transparent_55%)]"></div>
          <svg class="relative w-9 h-9" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M3 9c5.5-5.5 12.5-5.5 18 0" stroke="white" stroke-width="1.7" stroke-linecap="round"/>
            <path d="M6 12c3.8-3.8 8.2-3.8 12 0" stroke="white" stroke-width="1.7" stroke-linecap="round"/>
            <path d="M9 15c2-2 4-2 6 0" stroke="white" stroke-width="1.7" stroke-linecap="round"/>
            <circle cx="12" cy="18.2" r="1.2" fill="white"/>
          </svg>
        </div>
        <h3 class="mb-3 text-xl font-semibold text-rosatom-dark">Социнженерия и Wi‑Fi</h3>
        <p class="mb-4 text-gray-600">Фишинг/спир‑фишинг, аудит беспроводных сетей, поиск rogue‑точек, рекомендации по защите.</p>
      </div>

      <!-- Облака (по запросу) -->
      <div class="p-8 transition-all transform shadow-lg service-card rounded-2xl hover:shadow-2xl hover:-translate-y-2">
        <div class="relative flex items-center justify-center w-16 h-16 mb-6 overflow-hidden bg-gradient-to-br from-emerald-500 to-cyan-400 rounded-2xl shadow-lg ring-1 ring-black/10">
          <div class="absolute inset-0 opacity-60 bg-[radial-gradient(120%_100%_at_0%_0%,rgba(255,255,255,0.55),transparent_55%)]"></div>
          <svg class="relative w-9 h-9" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 15a4 4 0 114-4h3a3 3 0 110 6H8a2 2 0 110-4" stroke="white" stroke-width="1.7" stroke-linecap="round"/>
          </svg>
        </div>
        <h3 class="mb-3 text-xl font-semibold text-rosatom-dark">Аудит облачной инраструктуры</h3>
        <p class="mb-4 text-gray-600">Обзор облачного периметра и конфигураций (Azure/AWS/GCP/ЯО), IAM и хранилищ.</p>
      </div>
    </div>

    <!-- Подход и качество -->
<!-- Подход и качество (градиентная рамка + одинаковая высота) -->
<!-- Подход и качество (общая рамка + границы у карточек + одинаковая высота) -->
<div class="mt-20">
  <!-- Общая рамка -->
  <div class="relative rounded-3xl p-[1.5px] bg-gradient-to-br from-rosatom-blue/35 via-transparent to-rosatom-light/35">
    <div class="rounded-3xl bg-white ring-1 ring-black/5 shadow-[0_8px_30px_rgba(0,0,0,0.06)]">
      <div class="grid grid-cols-1 gap-8 p-6 md:p-8 lg:p-10 lg:grid-cols-3">
        <!-- Левая колонка -->
        <div class="lg:col-span-1">
          <h3 class="mb-3 text-2xl font-bold text-rosatom-dark">Методологии — по умолчанию</h3>
          <p class="text-gray-600">
            PTES, OSSTMM, OWASP ASVS/MASVS/API, маппинг на MITRE ATT&CK, приоритизация по CVSS v3.1.
            On‑prem: без внешних сервисов, артефакты и отчёты храним на ваших/наших серверах.
          </p>
        </div>

        <!-- Правая колонка: карточки -->
        <div class="grid grid-cols-1 gap-6 lg:col-span-2 md:grid-cols-2">
          <!-- Card 1 -->
          <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-rosatom-blue/30 via-transparent to-rosatom-light/30 transition-all duration-300 hover:from-rosatom-blue/55 hover:to-rosatom-light/55">
            <div class="flex h-full min-h-[180px] items-start gap-4 rounded-2xl bg-white p-6 ring-1 ring-black/5 shadow-[0_6px_22px_rgba(0,0,0,0.06)] transition-all duration-300 group-hover:shadow-[0_12px_30px_rgba(0,0,0,0.08)] group-hover:-translate-y-0.5">
              <div class="relative flex items-center justify-center flex-shrink-0 w-12 h-12 rounded-xl bg-gradient-to-br from-rosatom-blue to-rosatom-light ring-1 ring-black/10 overflow-hidden">
                <div class="absolute inset-0 opacity-60 bg-[radial-gradient(120%_100%_at_0%_0%,rgba(255,255,255,0.55),transparent_55%)]"></div>
                <svg class="relative w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M8 4v8m8-8v8M6 20h12" />
                </svg>
              </div>
              <div>
                <div class="mb-1 font-semibold">Scope and RoE</div>
                <div class="text-sm text-gray-600 leading-relaxed">Контуры, окна, лимиты нагрузки, точки контакта. Без DoS/DDoS и без атаки на прод‑данные.</div>
              </div>
            </div>
          </div>

          <!-- Card 2 -->
          <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-rosatom-blue/30 via-transparent to-rosatom-light/30 transition-all duration-300 hover:from-rosatom-blue/55 hover:to-rosatom-light/55">
            <div class="flex h-full min-h-[180px] items-start gap-4 rounded-2xl bg-white p-6 ring-1 ring-black/5 shadow-[0_6px_22px_rgba(0,0,0,0.06)] transition-all duration-300 group-hover:shadow-[0_12px_30px_rgba(0,0,0,0.08)] group-hover:-translate-y-0.5">
              <div class="relative flex items-center justify-center flex-shrink-0 w-12 h-12 rounded-xl bg-gradient-to-br from-rosatom-blue to-rosatom-light ring-1 ring-black/10 overflow-hidden">
                <div class="absolute inset-0 opacity-60 bg-[radial-gradient(120%_100%_at_0%_0%,rgba(255,255,255,0.55),transparent_55%)]"></div>
                <svg class="relative w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11V7m0 0l-2 2m2-2l2 2M5 13v5h14v-5" />
                </svg>
              </div>
              <div>
                <div class="mb-1 font-semibold">Безопасная эксплуатация</div>
                <div class="text-sm text-gray-600 leading-relaxed">Изолированные каналы, журналы действий, PoC‑артефакты, бэкапы. Влияние на бизнес — минимизируем.</div>
              </div>
            </div>
          </div>

          <!-- Card 3 -->
          <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-rosatom-blue/30 via-transparent to-rosatom-light/30 transition-all duration-300 hover:from-rosatom-blue/55 hover:to-rosatom-light/55">
            <div class="flex h-full min-h-[180px] items-start gap-4 rounded-2xl bg-white p-6 ring-1 ring-black/5 shadow-[0_6px_22px_rgba(0,0,0,0.06)] transition-all duration-300 group-hover:shadow-[0_12px_30px_rgba(0,0,0,0.08)] group-hover:-translate-y-0.5">
              <div class="relative flex items-center justify-center flex-shrink-0 w-12 h-12 rounded-xl bg-gradient-to-br from-rosatom-blue to-rosatom-light ring-1 ring-black/10 overflow-hidden">
                <div class="absolute inset-0 opacity-60 bg-[radial-gradient(120%_100%_at_0%_0%,rgba(255,255,255,0.55),transparent_55%)]"></div>
                <svg class="relative w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h7M7 16h5" />
                </svg>
              </div>
              <div>
                <div class="mb-1 font-semibold">Отчетность для бизнеса и SOC</div>
                <div class="text-sm text-gray-600 leading-relaxed">Executive Summary, CVSS, PoC/скриншоты, маппинг на ATT&CK/CWE, рекомендации и дорожная карта ремедиации.</div>
              </div>
            </div>
          </div>

          <!-- Card 4 -->
          <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-rosatom-blue/30 via-transparent to-rosatom-light/30 transition-all duration-300 hover:from-rosatom-blue/55 hover:to-rosatom-light/55">
            <div class="flex h-full min-h-[180px] items-start gap-4 rounded-2xl bg-white p-6 ring-1 ring-black/5 shadow-[0_6px_22px_rgba(0,0,0,0.06)] transition-all duration-300 group-hover:shadow-[0_12px_30px_rgba(0,0,0,0.08)] group-hover:-translate-y-0.5">
              <div class="relative flex items-center justify-center flex-shrink-0 w-12 h-12 rounded-xl bg-gradient-to-br from-rosatom-blue to-rosatom-light ring-1 ring-black/10 overflow-hidden">
                <div class="absolute inset-0 opacity-60 bg-[radial-gradient(120%_100%_at_0%_0%,rgba(255,255,255,0.55),transparent_55%)]"></div>
                <svg class="relative w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
              </div>
              <div>
                <div class="mb-1 font-semibold">Ретест</div>
                <div class="text-sm text-gray-600 leading-relaxed">Проверка исправлений и подтверждающий отчёт — как отдельная опция по согласованному SLA.</div>
              </div>
            </div>
          </div>
        </div>
        <!-- /Карточки -->
      </div>
    </div>
  </div>
</div>
  </div>
</section>

<!-- Процесс -->
<section id="process" class="py-20 bg-slate-50 relative overflow-hidden">
  <div class="grid-pattern absolute inset-0 opacity-20"></div>
  <div class="container mx-auto px-6 relative">
    <div class="text-center mb-16">
      <h2 class="text-4xl font-bold text-rosatom-dark mb-4">Как мы проводим пентест</h2>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto">Прозрачно и безопасно: согласование — тестирование — ремедиация — ретест (по опции).</p>
    </div>

    <!-- Обертка для сетки + декоративный коннектор -->
    <div class="relative">
      

      <!-- Сетка шагов -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 relative">
        <!-- ШАГ 01 -->
        <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-rosatom-blue/30 via-transparent to-rosatom-light/30 transition-all duration-300 hover:from-rosatom-blue/55 hover:to-rosatom-light/55">
          <div class="relative flex flex-col h-full min-h-[220px] rounded-2xl bg-white p-6 ring-1 ring-black/5 shadow-[0_6px_22px_rgba(0,0,0,0.06)] transition-all duration-300 group-hover:shadow-[0_12px_30px_rgba(0,0,0,0.08)] group-hover:-translate-y-0.5">
            <div class="inline-flex flex-col items-start self-start w-fit">
  <span class="inline-flex items-center px-3 py-1 rounded-full text-white text-[11px] font-semibold bg-gradient-to-r from-rosatom-blue to-rosatom-light shadow ring-1 ring-black/5">
    Этап 01
  </span>
  
</div>
            <div class="mt-3 text-xl font-semibold">Scope, RoE и доступы</div>
            <p class="mt-1 text-gray-600">Цели, критичные сервисы, окна, ограничения. Каналы связи и эскалации. Разрешающее письмо.</p>
            <div class="mt-auto pt-6">
              <div class="h-1.5 rounded-full bg-slate-100 overflow-hidden">
                <span class="block h-full w-0 group-hover:w-full transition-all duration-700 ease-out bg-gradient-to-r from-rosatom-blue to-rosatom-light"></span>
              </div>
            </div>
          </div>
        </div>

        <!-- ШАГ 02 -->
        <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-rosatom-blue/30 via-transparent to-rosatom-light/30 transition-all duration-300 hover:from-rosatom-blue/55 hover:to-rosatom-light/55">
          <div class="relative flex flex-col h-full min-h-[220px] rounded-2xl bg-white p-6 ring-1 ring-black/5 shadow-[0_6px_22px_rgba(0,0,0,0.06)] transition-all duration-300 group-hover:shadow-[0_12px_30px_rgba(0,0,0,0.08)] group-hover:-translate-y-0.5">
            <span class="inline-flex items-center px-3 py-1 rounded-full text-white text-[11px] font-semibold bg-gradient-to-r from-rosatom-blue to-rosatom-light shadow ring-1 ring-black/5  self-start w-fit">Этап 02</span>
            <div class="mt-3 text-xl font-semibold">Разведка и моделирование угроз</div>
            <p class="mt-1 text-gray-600">OSINT/артефакты, карта активов, маппинг TTP на MITRE ATT&CK, сценарии атак.</p>
            <div class="mt-auto pt-6">
              <div class="h-1.5 rounded-full bg-slate-100 overflow-hidden">
                <span class="block h-full w-0 group-hover:w-full transition-all duration-700 ease-out bg-gradient-to-r from-rosatom-blue to-rosatom-light"></span>
              </div>
            </div>
          </div>
        </div>

        <!-- ШАГ 03 -->
        <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-rosatom-blue/30 via-transparent to-rosatom-light/30 transition-all duration-300 hover:from-rosatom-blue/55 hover:to-rosatom-light/55">
          <div class="relative flex flex-col h-full min-h-[220px] rounded-2xl bg-white p-6 ring-1 ring-black/5 shadow-[0_6px_22px_rgba(0,0,0,0.06)] transition-all duration-300 group-hover:shadow-[0_12px_30px_rgba(0,0,0,0.08)] group-hover:-translate-y-0.5">
            <span class="inline-flex items-center px-3 py-1 rounded-full text-white text-[11px] font-semibold bg-gradient-to-r from-rosatom-blue to-rosatom-light shadow ring-1 ring-black/5  self-start w-fit">Этап 03</span>
            <div class="mt-3 text-xl font-semibold">Сканирование и анализ</div>
            <p class="mt-1 text-gray-600">Nmap/Nessus/OpenVAS, ручная валидация находок, приоритизация рисков.</p>
            <div class="mt-auto pt-6">
              <div class="h-1.5 rounded-full bg-slate-100 overflow-hidden">
                <span class="block h-full w-0 group-hover:w-full transition-all duration-700 ease-out bg-gradient-to-r from-rosatom-blue to-rosatom-light"></span>
              </div>
            </div>
          </div>
        </div>

        <!-- ШАГ 04 -->
        <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-rosatom-blue/30 via-transparent to-rosatom-light/30 transition-all duration-300 hover:from-rosatom-blue/55 hover:to-rosatom-light/55">
          <div class="relative flex flex-col h-full min-h-[220px] rounded-2xl bg-white p-6 ring-1 ring-black/5 shadow-[0_6px_22px_rgba(0,0,0,0.06)] transition-all duration-300 group-hover:shadow-[0_12px_30px_rgba(0,0,0,0.08)] group-hover:-translate-y-0.5">
            <span class="inline-flex items-center px-3 py-1 rounded-full text-white text-[11px] font-semibold bg-gradient-to-r from-rosatom-blue to-rosatom-light shadow ring-1 ring-black/5  self-start w-fit">Этап 04</span>
            <div class="mt-3 text-xl font-semibold">Эксплуатация и пост‑эксплуатация</div>
            <p class="mt-1 text-gray-600">Безопасные PoC, lateral movement, сбор доказательств. Минимизируем влияние на прод.</p>
            <div class="mt-auto pt-6">
              <div class="h-1.5 rounded-full bg-slate-100 overflow-hidden">
                <span class="block h-full w-0 group-hover:w-full transition-all duration-700 ease-out bg-gradient-to-r from-rosatom-blue to-rosatom-light"></span>
              </div>
            </div>
          </div>
        </div>

        <!-- ШАГ 05 -->
        <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-rosatom-blue/30 via-transparent to-rosatom-light/30 transition-all duration-300 hover:from-rosatom-blue/55 hover:to-rosatom-light/55">
          <div class="relative flex flex-col h-full min-h-[220px] rounded-2xl bg-white p-6 ring-1 ring-black/5 shadow-[0_6px_22px_rgba(0,0,0,0.06)] transition-all duration-300 group-hover:shadow-[0_12px_30px_rgba(0,0,0,0.08)] group-hover:-translate-y-0.5">
            <span class="inline-flex items-center px-3 py-1 rounded-full text-white text-[11px] font-semibold bg-gradient-to-r from-rosatom-blue to-rosatom-light shadow ring-1 ring-black/5 self-start w-fit">Этап 05</span>
            <div class="mt-3 text-xl font-semibold">Отчет и защита результатов</div>
            <p class="mt-1 text-gray-600">Executive Summary и технический отчёт, сессия Q&A со стейкхолдерами. Все артефакты — on‑prem.</p>
            <div class="mt-auto pt-6">
              <div class="h-1.5 rounded-full bg-slate-100 overflow-hidden">
                <span class="block h-full w-0 group-hover:w-full transition-all duration-700 ease-out bg-gradient-to-r from-rosatom-blue to-rosatom-light"></span>
              </div>
            </div>
          </div>
        </div>

        <!-- ШАГ 06 -->
        <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-rosatom-blue/30 via-transparent to-rosatom-light/30 transition-all duration-300 hover:from-rosatom-blue/55 hover:to-rosatom-light/55">
          <div class="relative flex flex-col h-full min-h-[220px] rounded-2xl bg-white p-6 ring-1 ring-black/5 shadow-[0_6px_22px_rgba(0,0,0,0.06)] transition-all duration-300 group-hover:shadow-[0_12px_30px_rgba(0,0,0,0.08)] group-hover:-translate-y-0.5">
            <span class="inline-flex items-center px-3 py-1 rounded-full text-white text-[11px] font-semibold bg-gradient-to-r from-rosatom-blue to-rosatom-light shadow ring-1 ring-black/5 self-start w-fit">Этап 06</span>
            <div class="mt-3 text-xl font-semibold">Ремедиация и ретест</div>
            <p class="mt-1 text-gray-600">Рекомендации, матрица приоритетов. Ретест — отдельная опция, по согласованному окну.</p>
            <div class="mt-auto pt-6">
              <div class="h-1.5 rounded-full bg-slate-100 overflow-hidden">
                <span class="block h-full w-0 group-hover:w-full transition-all duration-700 ease-out bg-gradient-to-r from-rosatom-blue to-rosatom-light"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- /Сетка шагов -->
    </div>

    <div class="text-center mt-12">
      <a href="/Template/list_pentest.docx" download class="inline-flex items-center gap-2 bg-rosatom-blue hover:bg-rosatom-dark text-white px-8 py-4 rounded-lg font-semibold transition-all focus-ring">
        Скачать опросный лист
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M13 7l5 5-5 5M6 12h12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </a>
    </div>
  </div>
</section>

<!-- Форматы работ -->
<section id="engagement" class="py-20 bg-white">
  <div class="container mx-auto px-6">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-rosatom-dark mb-4">Форматы работ</h2>
      <p class="text-xl text-gray-600">Под цели проверки и уровень зрелости команды.</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 items-stretch">
      <!-- Black‑box -->
      <div class="group relative h-full rounded-2xl border border-slate-200 bg-white p-6 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:bg-black hover:border-black">
        <div class="text-sm text-gray-500 mb-2 transition-colors group-hover:text-white/80">Black‑box</div>
        <div class="text-xl font-semibold mb-2 text-rosatom-dark transition-colors group-hover:text-white">Проверка «как атакующий»</div>
        <p class="text-gray-600 transition-colors group-hover:text-white/90">Минимум вводных, фокус на внешнем периметре и реальных сценариях первичного доступа.</p>
      </div>

      <!-- Grey‑box — Medium Granite (белый текст на hover) -->
<div class="group relative h-full overflow-hidden rounded-2xl border border-slate-200 bg-white p-6 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:border-transparent hover:ring-1 hover:ring-slate-400 hover:bg-[linear-gradient(140deg,#a8b0b8_0%,#6b7280_100%)]">
  <div class="pointer-events-none absolute inset-0 rounded-2xl opacity-0 transition-opacity duration-300 group-hover:opacity-10 bg-[url('data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%2260%22%20height=%2260%22%20viewBox=%220%200%2060%2060%22%3E%3Cfilter%20id=%22n%22%3E%3CfeTurbulence%20type=%22fractalNoise%22%20baseFrequency=%22.9%22%20numOctaves=%222%22%20stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect%20width=%22100%25%22%20height=%22100%25%22%20filter=%22url(%23n)%22%20opacity=%22.05%22/%3E%3C/svg%3E')] bg-[length:120px_120px]"></div>

  <div class="text-sm text-gray-500 mb-2 transition-colors group-hover:text-white/85">Grey‑box</div>
  <div class="text-xl font-semibold mb-2 text-rosatom-dark transition-colors group-hover:text-white">Оптимальный баланс</div>
  <p class="text-gray-600 transition-colors group-hover:text-white/90">Тест‑аккаунты/доки для ускорения и глубины. Лучший баланс покрытия и сроков.</p>
</div>

      <!-- White‑box -->
<div class="group relative h-full overflow-hidden rounded-2xl border border-slate-200 p-6 bg-white bg-[radial-gradient(120%_100%_at_0%_0%,rgba(20,115,230,.06),transparent_55%)] transition-all duration-300 hover:-translate-y-1 hover:shadow-[0_16px_48px_rgba(20,115,230,0.18)] hover:border-rosatom-blue/30 hover:ring-2 hover:ring-rosatom-blue/30">
  <!-- Лёгкий бренд‑блик на hover -->
  <div class="pointer-events-none absolute inset-0 rounded-2xl opacity-0 transition-opacity duration-300 group-hover:opacity-100 bg-gradient-to-br from-rosatom-blue/5 to-rosatom-light/5"></div>

  <div class="text-sm text-gray-500 mb-2 transition-colors group-hover:text-rosatom-blue">White‑box</div>
  <div class="text-xl font-semibold mb-2 text-rosatom-dark transition-colors group-hover:text-rosatom-dark">Максимальная глубина</div>
  <p class="text-gray-600 transition-colors">Доступ к схемам/конфигам/исходникам. Поиск сложных логических уязвимостей.</p>
</div>

      <!-- Разовый / Программа -->
      <div class="group relative h-full rounded-2xl border border-slate-200 bg-white p-6 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:bg-gradient-to-br hover:from-rosatom-blue hover:to-rosatom-light hover:border-transparent">
        <div class="text-sm text-gray-500 mb-2 transition-colors group-hover:text-white/85">Разовый / Программа</div>
        <div class="text-xl font-semibold mb-2 text-rosatom-dark transition-colors group-hover:text-white">Регулярные проверки</div>
        <p class="text-gray-600 transition-colors group-hover:text-white/90">Ежегодный цикл с дельта‑тестами и ретестами. План ремедиации и контроль прогресса.</p>
      </div>

      <!-- Red Team -->
      <div class="group relative h-full rounded-2xl border border-slate-200 bg-white p-6 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:bg-gradient-to-br hover:from-rose-600 hover:to-orange-500 hover:border-transparent">
        <div class="text-sm text-gray-500 mb-2 transition-colors group-hover:text-white/85">Red Team</div>
        <div class="text-xl font-semibold mb-2 text-rosatom-dark transition-colors group-hover:text-white">Симуляция атак</div>
        <p class="text-gray-600 transition-colors group-hover:text-white/90">TTP‑симуляции под цели бизнеса, обход детектирования, оценка устойчивости процессов.</p>
      </div>

      <!-- Purple Team -->
      <div class="group relative h-full rounded-2xl border border-slate-200 bg-white p-6 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:bg-gradient-to-br hover:from-violet-600 hover:to-fuchsia-500 hover:border-transparent">
        <div class="text-sm text-gray-500 mb-2 transition-colors group-hover:text-white/85">Purple Team</div>
        <div class="text-xl font-semibold mb-2 text-rosatom-dark transition-colors group-hover:text-white">Совместно с SOC</div>
        <p class="text-gray-600 transition-colors group-hover:text-white/90">Совместные сессии с SOC, маппинг на ATT&CK, улучшение правил и процедур реагирования.</p>
      </div>
    </div>
  </div>
</section>

<!-- Инструменты / платформы -->
<section id="stack" class="py-20 bg-slate-50">
  <div class="container mx-auto px-6">
    <div class="text-center mb-12">
  <div class="inline-flex flex-col items-center mx-auto">
    <h2 class="text-4xl font-bold text-rosatom-dark">Инструменты и платформы</h2>
    <div class="mt-2 h-1 w-full rounded-full bg-gradient-to-r from-rosatom-blue to-rosatom-light"></div>
  </div>
  <p class="text-xl text-gray-600 mt-4">
    Комбинируем open‑source и коммерческие решения. Всё — в on‑prem контуре.
  </p>
</div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 items-stretch">
      <!-- Web / API / Периметр -->
      <div class="group relative h-full rounded-2xl p-[2px] bg-gradient-to-br from-slate-200/60 via-transparent to-slate-200/60 transition-all duration-300 hover:from-rosatom-blue/30 hover:to-rosatom-light/30">
        <div class="h-full rounded-2xl bg-white p-6 ring-1 ring-slate-200 shadow-sm transition-all duration-300 group-hover:shadow-[0_16px_48px_rgba(20,115,230,0.12)]">
          <div class="mb-5">
  <div class="inline-flex flex-col items-start w-fit">
    <div class="font-semibold text-rosatom-dark">Web / API / Периметр</div>
    <div class="mt-2 h-1 w-full rounded-full bg-gradient-to-r from-rosatom-blue to-rosatom-light"></div>
  </div>
</div>
          <!-- Контур вокруг стека на hover -->
          <div class="rounded-xl p-3 ring-1 ring-slate-200 transition-all duration-300 group-hover:ring-rosatom-blue/40 group-hover:shadow-[0_0_0_4px_rgba(20,115,230,0.08)]">
            <div class="flex flex-wrap gap-2">
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Nmap</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Masscan</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Nessus</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">OpenVAS</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Burp Suite Pro</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">OWASP ZAP</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">sqlmap</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">ffuf</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">dirsearch</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">nuclei</span>
            </div>
          </div>
        </div>
      </div>

      <!-- AD / Внутрисеть -->
      <div class="group relative h-full rounded-2xl p-[2px] bg-gradient-to-br from-slate-200/60 via-transparent to-slate-200/60 transition-all duration-300 hover:from-rosatom-blue/30 hover:to-rosatom-light/30">
        <div class="h-full rounded-2xl bg-white p-6 ring-1 ring-slate-200 shadow-sm transition-all duration-300 group-hover:shadow-[0_16px_48px_rgba(20,115,230,0.12)]">
          <div class="mb-5">
  <div class="inline-flex flex-col items-start w-fit">
    <div class="font-semibold text-rosatom-dark">AD / Внутрисеть</div>
    <div class="mt-2 h-1 w-full rounded-full bg-gradient-to-r from-rosatom-blue to-rosatom-light"></div>
  </div>
</div>
          <div class="rounded-xl p-3 ring-1 ring-slate-200 transition-all duration-300 group-hover:ring-rosatom-blue/40 group-hover:shadow-[0_0_0_4px_rgba(20,115,230,0.08)]">
            <div class="flex flex-wrap gap-2">
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">BloodHound</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">CrackMapExec</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Impacket</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Responder</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Kerbrute</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Rubeus</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Sliver</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Hashcat</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Wireshark</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Desktop / Thick‑client -->
      <div class="group relative h-full rounded-2xl p-[2px] bg-gradient-to-br from-slate-200/60 via-transparent to-slate-200/60 transition-all duration-300 hover:from-rosatom-blue/30 hover:to-rosatom-light/30">
        <div class="h-full rounded-2xl bg-white p-6 ring-1 ring-slate-200 shadow-sm transition-all duration-300 group-hover:shadow-[0_16px_48px_rgba(20,115,230,0.12)]">
          <div class="mb-5">
  <div class="inline-flex flex-col items-start w-fit">
    <div class="font-semibold text-rosatom-dark">Desktop / Thick‑client</div>
    <div class="mt-2 h-1 w-full rounded-full bg-gradient-to-r from-rosatom-blue to-rosatom-light"></div>
  </div>
</div>
          <div class="rounded-xl p-3 ring-1 ring-slate-200 transition-all duration-300 group-hover:ring-rosatom-blue/40 group-hover:shadow-[0_0_0_4px_rgba(20,115,230,0.08)]">
            <div class="flex flex-wrap gap-2">
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">mitmproxy</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Frida</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Procmon</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Sysinternals</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">ILSpy/dnSpy</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">API Monitor</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Ghidra</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Wireless / Фишинг / Отчетность -->
      <div class="group relative h-full rounded-2xl p-[2px] bg-gradient-to-br from-slate-200/60 via-transparent to-slate-200/60 transition-all duration-300 hover:from-rosatom-blue/30 hover:to-rosatom-light/30">
        <div class="h-full rounded-2xl bg-white p-6 ring-1 ring-slate-200 shadow-sm transition-all duration-300 group-hover:shadow-[0_16px_48px_rgba(20,115,230,0.12)]">
          <div class="mb-5">
  <div class="inline-flex flex-col items-start w-fit">
    <div class="font-semibold text-rosatom-dark">Wireless / Фишинг / Отчетность</div>
    <div class="mt-2 h-1 w-full rounded-full bg-gradient-to-r from-rosatom-blue to-rosatom-light"></div>
  </div>
</div>
          <div class="rounded-xl p-3 ring-1 ring-slate-200 transition-all duration-300 group-hover:ring-rosatom-blue/40 group-hover:shadow-[0_0_0_4px_rgba(20,115,230,0.08)]">
            <div class="flex flex-wrap gap-2">
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Kismet</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Aircrack‑ng</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Bettercap</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Gophish</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">King Phisher</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Dradis</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Serpico</span>
              <span class="inline-flex items-center whitespace-nowrap rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-700 ring-1 ring-slate-200 transition-all hover:-translate-y-0.5 hover:bg-rosatom-blue/10 hover:text-rosatom-blue hover:ring-rosatom-blue/30">Faraday</span>
            </div>
          </div>
        </div>
      </div>
      <!-- /cards -->
    </div>
  </div>
</section>

<!-- Соответствие требованиям (современный стиль) -->
<section id="compliance" class="py-20 gradient-rosatom text-white relative overflow-hidden">
  <div class="container mx-auto px-6 relative z-10">
    <div class="text-center mb-12">
      <div class="inline-flex flex-col items-center mx-auto">
        <h2 class="text-4xl font-bold mb-2">Соответствие и методологии</h2>
        <div class="h-1 w-full rounded-full bg-gradient-to-r from-white/70 via-rosatom-light/80 to-white/70"></div>
      </div>
      <p class="text-xl opacity-90 mt-4">Готовим отчётность и ведём работы под регуляторные и корпоративные требования.</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      <!-- Card -->
      <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-white/25 via-white/10 to-white/5 transition-all duration-300 hover:from-rosatom-light/50 hover:to-rosatom-blue/50">
        <div class="relative h-full rounded-2xl bg-white/10 p-6 ring-1 ring-white/20 shadow-[inset_0_1px_0_rgba(255,255,255,0.18)] backdrop-blur-sm transition-all duration-300 group-hover:shadow-[0_16px_48px_rgba(0,0,0,0.25)] group-hover:-translate-y-1">
          <div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/50 to-transparent"></div>
          <div class="text-2xl font-bold mb-2">OWASP</div>
          <div class="opacity-90">Top‑10, ASVS, MASVS, OWASP API — чек‑листы, методики, трассировка находок.</div>
          <div class="mt-6">
            <div class="h-1 w-10 rounded-full bg-gradient-to-r from-white/70 to-rosatom-light/80 transition-all duration-300 group-hover:w-full"></div>
          </div>
        </div>
      </div>

      <!-- Card -->
      <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-white/25 via-white/10 to-white/5 transition-all duration-300 hover:from-rosatom-light/50 hover:to-rosatom-blue/50">
        <div class="relative h-full rounded-2xl bg-white/10 p-6 ring-1 ring-white/20 shadow-[inset_0_1px_0_rgba(255,255,255,0.18)] backdrop-blur-sm transition-all duration-300 group-hover:shadow-[0_16px_48px_rgba(0,0,0,0.25)] group-hover:-translate-y-1">
          <div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/50 to-transparent"></div>
          <div class="text-2xl font-bold mb-2">PTES / OSSTMM</div>
          <div class="opacity-90">Полный цикл пентеста: разведка, анализ, эксплуатация, отчёт, ретест (как опция).</div>
          <div class="mt-6">
            <div class="h-1 w-10 rounded-full bg-gradient-to-r from-white/70 to-rosatom-light/80 transition-all duration-300 group-hover:w-full"></div>
          </div>
        </div>
      </div>

      <!-- Card -->
      <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-white/25 via-white/10 to-white/5 transition-all duration-300 hover:from-rosatom-light/50 hover:to-rosatom-blue/50">
        <div class="relative h-full rounded-2xl bg-white/10 p-6 ring-1 ring-white/20 shadow-[inset_0_1px_0_rgba(255,255,255,0.18)] backdrop-blur-sm transition-all duration-300 group-hover:shadow-[0_16px_48px_rgba(0,0,0,0.25)] group-hover:-translate-y-1">
          <div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/50 to-transparent"></div>
          <div class="text-2xl font-bold mb-2">152‑ФЗ / 187‑ФЗ</div>
          <div class="opacity-90">Учёт уровней защищенности ПДн и требований КИИ, подготовка материалов для проверок.</div>
          <div class="mt-6">
            <div class="h-1 w-10 rounded-full bg-gradient-to-r from-white/70 to-rosatom-light/80 transition-all duration-300 group-hover:w-full"></div>
          </div>
        </div>
      </div>

      <!-- Card -->
      <div class="group relative h-full rounded-2xl p-[1.5px] bg-gradient-to-br from-white/25 via-white/10 to-white/5 transition-all duration-300 hover:from-rosatom-light/50 hover:to-rosatom-blue/50">
        <div class="relative h-full rounded-2xl bg-white/10 p-6 ring-1 ring-white/20 shadow-[inset_0_1px_0_rgba(255,255,255,0.18)] backdrop-blur-sm transition-all duration-300 group-hover:shadow-[0_16px_48px_rgba(0,0,0,0.25)] group-hover:-translate-y-1">
          <div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/50 to-transparent"></div>
          <div class="text-2xl font-bold mb-2">ISO / ГОСТ</div>
          <div class="opacity-90">ISO/IEC 27001/27002, ГОСТ Р 57580, PCI DSS — по запросу.</div>
          <div class="mt-6">
            <div class="h-1 w-10 rounded-full bg-gradient-to-r from-white/70 to-rosatom-light/80 transition-all duration-300 group-hover:w-full"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="text-center mt-12">
      <a href="#brief" class="js-open-modal inline-flex items-center gap-2 bg-white text-rosatom-blue px-8 py-4 rounded-lg font-semibold hover:bg-white/90 hover:shadow-lg transition-all focus-ring">
        Получить консультацию
      </a>
    </div>
  </div>

  <!-- Лёгкий декоративный слой -->
  <div class="pointer-events-none absolute -top-32 -right-24 w-[36rem] h-[36rem] rounded-full bg-gradient-to-br from-rosatom-light/30 to-white/10 blur-3xl opacity-60"></div>
  <div class="pointer-events-none absolute -bottom-32 -left-24 w-[28rem] h-[28rem] rounded-full bg-gradient-to-br from-white/10 to-rosatom-blue/30 blur-3xl opacity-50"></div>

  <div class="grid-pattern absolute inset-0 opacity-20"></div>
</section>

<!-- FAQ -->
<section id="faq" class="py-20 bg-slate-50">
  <div class="container mx-auto px-6">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-rosatom-dark mb-4">Частые вопросы</h2>
    </div>

    <div class="max-w-3xl mx-auto space-y-4">
      <details class="card !p-6 group">
        <summary class="cursor-pointer list-none flex items-center justify-between">
          <span class="font-semibold">Насколько безопасно проводить пентест на проде?</span>
          <svg class="w-5 h-5 text-gray-500 group-open:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </summary>
        <div class="mt-3 text-gray-600">Работаем по RoE: окна, лимиты, исключаем DoS/DDoS и техники с высоким риском. Журналы действий, бэкапы, постоянная связь с ответственными.</div>
      </details>
      <details class="card !p-6 group">
        <summary class="cursor-pointer list-none flex items-center justify-between">
          <span class="font-semibold">Какие доступы и данные нужны для старта?</span>
          <svg class="w-5 h-5 text-gray-500 group-open:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </summary>
        <div class="mt-3 text-gray-600">Список целей (домены/IP/URL), условия тестов, контакт 24/7, разрешающее письмо. Для внутреннего — доступ в сегмент/AD по сценарию.</div>
      </details>
      <details class="card !p-6 group">
        <summary class="cursor-pointer list-none flex items-center justify-between">
          <span class="font-semibold">Что будет в отчёте?</span>
          <svg class="w-5 h-5 text-gray-500 group-open:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </summary>
        <div class="mt-3 text-gray-600">Executive Summary, технический отчёт с CVSS, PoC/скриншотами, маппингом на ATT&CK/CWE и планом ремедиации. Артефакты — в on‑prem контуре.</div>
      </details>
      <details class="card !p-6 group">
        <summary class="cursor-pointer list-none flex items-center justify-between">
          <span class="font-semibold">Ретест включён в стоимость?</span>
          <svg class="w-5 h-5 text-gray-500 group-open:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </summary>
        <div class="mt-3 text-gray-600">Ретест — отдельная опция. Проводится по согласованному окну и SLA, с выдачей подтверждающего отчёта.</div>
      </details>
      <details class="card !p-6 group">
        <summary class="cursor-pointer list-none flex items-center justify-between">
          <span class="font-semibold">Используете ли внешние сервисы/облака в работе?</span>
          <svg class="w-5 h-5 text-gray-500 group-open:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </summary>
        <div class="mt-3 text-gray-600">Нет. Все инструменты, артефакты и отчёты — на наших или ваших on‑prem серверах. Обмен данными — по защищенным каналам.</div>
      </details>
      <details class="card !p-6 group">
        <summary class="cursor-pointer list-none flex items-center justify-between">
          <span class="font-semibold">Проверяете мобильные/облака?</span>
          <svg class="w-5 h-5 text-gray-500 group-open:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </summary>
        <div class="mt-3 text-gray-600">Да, по запросу. Уточним цели и сценарии в рамках Scope/RoE.</div>
      </details>
    </div>
  </div>
</section>

<!-- Итоговый CTA -->
<section class="gradient-rosatom text-white py-20 relative">
  <div class="grid-pattern absolute inset-0 opacity-20"></div>
  <div class="container mx-auto px-6 text-center relative z-10">
    <h2 class="text-4xl font-bold mb-4">Начните аудит сегодня</h2>
    <p class="text-xl mb-8 max-w-2xl mx-auto">Отправьте бриф — согласуем Scope/RoE и стартуем в удобное окно.</p>
    <div class="flex flex-col sm:flex-row gap-4 justify-center">
      <a href="#brief" class="js-open-modal bg-white text-rosatom-blue px-8 py-4 rounded-lg font-semibold transition-all transform hover:scale-105 hover:shadow-lg focus-ring">
        Оставить заявку
      </a>
      <a href="tel:+74951234567" class="border border-white text-white hover:bg-white hover:text-rosatom-blue px-8 py-4 rounded-lg font-semibold transition-all focus-ring">
        +7 (495) 123‑45‑67
      </a>
    </div>
  </div>
</section>

<div id="footer-placeholder"></div>

<script>
  // Плавный скролл и активный пункт сабнавигации
  const links = document.querySelectorAll('.scroll-link');
  const sections = [...links].map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);
  links.forEach(a => a.addEventListener('click', e => {
    e.preventDefault();
    const target = document.querySelector(a.getAttribute('href'));
    if (!target) return;
    const y = target.getBoundingClientRect().top + window.scrollY - 80;
    window.scrollTo({ top: y, behavior: (window.matchMedia('(prefers-reduced-motion: reduce)').matches ? 'auto' : 'smooth') });
  }));
  const onScroll = () => {
    const pos = window.scrollY + 100;
    sections.forEach((sec, i) => {
      const id = '#' + sec.id;
      const link = document.querySelector(`.scroll-link[href="${id}"]`);
      if (!link) return;
      const inView = pos >= sec.offsetTop && pos < sec.offsetTop + sec.offsetHeight;
      link.classList.toggle('active', inView);
      link.classList.toggle('text-rosatom-blue', inView);
      link.classList.toggle('bg-rosatom-blue/10', inView);
    });
  };
  document.addEventListener('scroll', onScroll, { passive: true });
  onScroll();

  // Анимация счетчиков (если добавите элементы с data-counter)
  const counters = document.querySelectorAll('[data-counter]');
  const io = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const el = entry.target;
        const to = parseInt(el.dataset.to, 10) || 0;
        const plus = el.dataset.counter.includes('+') ? '+' : '';
        let start = 0;
        const dur = 1200; const startTime = performance.now();
        const step = (now) => {
          const p = Math.min((now - startTime) / dur, 1);
          const val = Math.floor(p * to);
          el.textContent = val + plus;
          if (p < 1) requestAnimationFrame(step);
        };
        requestAnimationFrame(step);
        io.unobserve(el);
      }
    });
  }, { threshold: 0.6 });
  counters.forEach(el => io.observe(el));
</script>

<!-- Footer -->
<div id="footer-placeholder"></div>

<!-- Подключение скриптов -->

  <!-- Терминальная анимация: простой и автономный скрипт -->
<script>
  (async function () {
    const out = document.getElementById('terminal-output');
    if (!out) return console.warn('Element #terminal-output not found');

    // Настройки
    const typingSpeed = 18;         // мс на символ
    const delayBetweenLines = 600;  // пауза между строками
    const allowExternalIpLookup = true; // у вас нет /api/visitor, поэтому оставляем true

    // Собираем информацию о посетителе (с таймаутом)
    const info = await gatherVisitorInfo({ timeout: 1800, allowExternalIpLookup });

    // Хелперы для шагов (строки и прогресс)
    function line(text) { return { kind: 'line', text }; }
    function progress(label, duration = 1200) { return { kind: 'progress', label, duration }; }

    // Дата отчёта/ID
    const now = new Date();
    const reportDate = now.toISOString().slice(0, 10);
    const reportId = Math.random().toString(16).slice(2, 6);

    // Последовательность «терминала»
    const steps = [
      line(`Начало проверки: external-scan — target=${info?.ip || location.hostname || 'unknown'}`),
      line(`Инициализация сканера ... OK`),
      line(`Сбор сведений о посетителе ...`),
      ...(info ? [
        line(`Браузер: ${joinParts(info.browser, info.browserVersion)}`),
        line(`ОС: ${joinParts(info.os, info.arch)}`),
        line(`Языки: ${info.languages.join(', ')} | Часовой пояс: ${info.timezone || '-'}`),
        line(`Экран: ${info.screen} | Viewport: ${info.viewport} | DPR: ${info.dpr}`),
        info.connection ? line(`Сеть: ${info.connection}`) : null,
        (info.cores || info.memory) ? line(`Хард: ${info.cores ? info.cores + ' потоков' : ''}${info.memory ? ' | RAM: ' + info.memory + 'ГБ' : ''}`) : null,
        info.battery ? line(`Батарея: ${info.battery}`) : null,
        info.ip ? line(`IP: ${info.ip}${formatGeo(info)}`) : null,
      ].filter(Boolean) : [line('(не удалось собрать сведения о клиенте)')]),

      // Псевдо-тесты с прогресс-баром
      progress('Пассивный анализ трафика', 900),
      progress('TLS/сертификат', 1000),
      progress('Заголовки безопасности', 1000),
      progress('Проверка публичных эндпоинтов', 1200),

      // Итоги тестов (симуляция)
      line(`HTTP(S) fingerprinting: detected nginx/1.18.0`),
      line(`Проверка заголовков безопасности: X-Frame-Options отсутствует`),
      line(`Поиск SQLi в /api/v1/items ... найдено потенциальное вхождение`),
      progress('Подтверждение уязвимости (симуляция)', 800),
      line(`Запуск быстрого эксплойта (симуляция) ... запрещено (safe-mode)`),
      line(`Финальный отчет: 1 критическая, 3 средних, 7 низких`),
      line(`Сформировать отчёт PDF -> /reports/scan-${reportDate}-${reportId}.pdf`),
    ];

    // Машинка печати + прогресс-бар
    let history = [];
    let currentLine = '';
    let stepIndex = 0;
    let charIndex = 0;

    runNextStep();

    function runNextStep() {
      if (stepIndex >= steps.length) return finish();
      const step = steps[stepIndex++];

      if (step.kind === 'line') typeLine(step.text, runNextStep);
      else if (step.kind === 'progress') animateProgress(step.label, step.duration, runNextStep);
    }

    function typeLine(text, cb) {
      currentLine = '';
      charIndex = 0;
      function tick() {
        if (charIndex < text.length) {
          currentLine += text[charIndex++];
          render();
          setTimeout(tick, typingSpeed);
        } else {
          history.push(currentLine);
          currentLine = '';
          render();
          setTimeout(cb, delayBetweenLines);
        }
      }
      tick();
    }

    function animateProgress(label, duration, cb) {
      const width = 22; // ширина прогресс-бара в символах
      let start;
      function frame(ts) {
        if (!start) start = ts;
        const t = Math.min((ts - start) / duration, 1);
        const filled = Math.max(0, Math.min(width, Math.floor(width * t)));
        const bar = '[' + '█'.repeat(filled) + '░'.repeat(width - filled) + `] ${Math.round(t * 100)}% — ${label}`;
        currentLine = bar;
        render();
        if (t < 1) requestAnimationFrame(frame);
        else {
          history.push(currentLine);
          currentLine = '';
          render();
          setTimeout(cb, delayBetweenLines);
        }
      }
      requestAnimationFrame(frame);
    }

    function finish() {
      setTimeout(() => {
        out.textContent = [...history].slice(-6).join('\n');
        const c = document.createElement('span');
        c.className = 'cursor';
        out.appendChild(c);
        out.scrollTop = out.scrollHeight;
      }, 300);
    }

    function render() {
      const shown = history.concat(currentLine ? [currentLine] : []);
      out.textContent = shown.join('\n');
      const span = document.createElement('span');
      span.className = 'cursor';
      out.appendChild(span);
      out.scrollTop = out.scrollHeight;
    }

    function joinParts(a, b) { return [a, b].filter(Boolean).join(' '); }

    function formatGeo(info) {
      const geo = [info.city, info.region, info.country].filter(Boolean).join(', ');
      return geo ? ` — ${geo}` : '';
    }

    // ---------- helpers ----------

    async function gatherVisitorInfo({ timeout = 1500, allowExternalIpLookup = true } = {}) {
      const languages = navigator.languages && navigator.languages.length
        ? navigator.languages
        : [navigator.language].filter(Boolean);

      const tz = (Intl.DateTimeFormat().resolvedOptions().timeZone) || '';

      const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
      const net = connection
        ? [
            connection.effectiveType || connection.type,
            connection.downlink ? `${connection.downlink}Mbps` : null,
            connection.rtt ? `${connection.rtt}ms` : null,
            connection.saveData ? 'save-data' : null,
          ].filter(Boolean).join(', ')
        : null;

      const screenStr = `${window.screen.width}x${window.screen.height}`;
      const viewportStr = `${window.innerWidth}x${window.innerHeight}`;
      const dpr = (window.devicePixelRatio || 1).toString();

      // UA-CH (современные браузеры)
      let uaData = null;
      if (navigator.userAgentData?.getHighEntropyValues) {
        try {
          uaData = await navigator.userAgentData.getHighEntropyValues(
            ['platform', 'platformVersion', 'architecture', 'model', 'uaFullVersion']
          );
        } catch (_) {}
      }

      const ua = navigator.userAgent || '';
      const parsed = parseUA(ua, uaData);

      // IP/Geo без вашего бэкенда — каскад провайдеров
      let ip, city, region, country;
      if (allowExternalIpLookup) {
        try {
          const result = await raceIpProviders(timeout);
          ip = result.ip; city = result.city; region = result.region; country = result.country;
        } catch (_) {}
      }

      // Батарея (если доступно)
      let batteryStr = '';
      try {
        if (navigator.getBattery) {
          const b = await navigator.getBattery();
          if (b) {
            const p = Math.round(b.level * 100);
            batteryStr = `${p}%${b.charging ? ' (зарядка)' : ''}`;
          }
        }
      } catch (_) {}

      const cores = navigator.hardwareConcurrency || 0;
      const memory = navigator.deviceMemory || 0;

      return {
        browser: parsed.browser,
        browserVersion: parsed.browserVersion,
        os: parsed.os,
        arch: parsed.arch,
        languages,
        timezone: tz,
        screen: screenStr,
        viewport: viewportStr,
        dpr,
        connection: net,
        ip, city, region, country,
        battery: batteryStr || null,
        cores: cores || null,
        memory: memory || null,
      };
    }

    async function raceIpProviders(timeout) {
      const providers = [
        async () => {
          const r = await withTimeout(fetch('https://ipapi.co/json/', { cache: 'no-store' }), timeout);
          if (!r.ok) throw new Error('ipapi not ok');
          const j = await r.json();
          return { ip: j.ip, city: j.city, region: j.region, country: j.country_name };
        },
        async () => {
          const r = await withTimeout(fetch('https://ipwho.is/', { cache: 'no-store' }), timeout);
          const j = await r.json();
          if (!j || j.success === false) throw new Error('ipwho.is failed');
          return { ip: j.ip, city: j.city, region: j.region, country: j.country };
        },
        async () => {
          const r = await withTimeout(fetch('https://api64.ipify.org?format=json', { cache: 'no-store' }), timeout);
          if (!r.ok) throw new Error('ipify not ok');
          const j = await r.json();
          return { ip: j.ip };
        },
        async () => {
          const r = await withTimeout(fetch('https://www.cloudflare.com/cdn-cgi/trace', { cache: 'no-store' }), timeout);
          if (!r.ok) throw new Error('cf trace not ok');
          const t = await r.text();
          const m = t.match(/^ip=([^\n]+)/m);
          if (!m) throw new Error('cf parse');
          return { ip: m[1] };
        },
      ];

      const errors = [];
      for (const p of providers) {
        try {
          const res = await p();
          if (res?.ip) return res;
        } catch (e) {
          errors.push(String(e));
        }
      }
      throw new Error('all IP providers failed: ' + errors.join('; '));
    }

    function parseUA(ua, uaData) {
      let browser = 'Неизвестно', browserVersion = '', os = 'Неизвестно', arch = '';

      if (uaData) {
        const p = uaData.platform || '';
        const pv = (uaData.platformVersion || '').split('.')[0];
        const major = parseInt(pv, 10);
        if (p === 'Windows') {
          os = Number.isFinite(major) ? (major >= 13 ? 'Windows 11' : 'Windows 10') : 'Windows';
        } else if (p === 'macOS') {
          os = 'macOS';
        } else if (p === 'Android') {
          os = 'Android';
        } else if (p) {
          os = p;
        }
        arch = mapArch(uaData.architecture);
      }

      // Браузер из UA (fallback)
      if (/Edg\/(\S+)/.test(ua)) { browser = 'Edge'; browserVersion = RegExp.$1; }
      else if (/OPR\/(\S+)/.test(ua)) { browser = 'Opera'; browserVersion = RegExp.$1; }
      else if (/Chrome\/(\S+)/.test(ua)) { browser = 'Chrome'; browserVersion = RegExp.$1; }
      else if (/Firefox\/(\S+)/.test(ua)) { browser = 'Firefox'; browserVersion = RegExp.$1; }
      else if (/Version\/(\S+).*Safari/.test(ua)) { browser = 'Safari'; browserVersion = RegExp.$1; }

      // ОС (fallback, если UA-CH нет)
      if (!uaData) {
        if (/Windows NT 10/.test(ua)) os = 'Windows 10/11';
        else if (/Windows NT 6\.3/.test(ua)) os = 'Windows 8.1';
        else if (/Windows NT 6\.2/.test(ua)) os = 'Windows 8';
        else if (/Windows NT 6\.1/.test(ua)) os = 'Windows 7';
        else if (/Mac OS X ([\d_]+)/.test(ua)) os = 'macOS ' + RegExp.$1.replace(/_/g, '.');
        else if (/Android ([\d.]+)/.test(ua)) os = 'Android ' + RegExp.$1;
        else if (/(iPhone|iPad).*OS ([\d_]+)/.test(ua)) os = 'iOS ' + RegExp.$2.replace(/_/g, '.');
        else if (/Linux/.test(ua)) os = 'Linux';
      }
      return { browser, browserVersion, os, arch };
    }

    function mapArch(a) {
      if (!a) return '';
      const s = String(a).toLowerCase();
      if (s.includes('x86_64') || s.includes('amd64')) return 'x64';
      if (s.includes('x86')) return 'x86';
      if (s.includes('arm64') || s.includes('aarch64')) return 'arm64';
      if (s.includes('arm')) return 'arm';
      return a;
    }

    function withTimeout(promise, ms) {
      return new Promise((resolve, reject) => {
        const t = setTimeout(() => reject(new Error('timeout')), ms);
        promise.then(
          v => { clearTimeout(t); resolve(v); },
          e => { clearTimeout(t); reject(e); }
        );
      });
    }
  })();
</script>

<script src="../components.js"></script>
<script src="../script.js"></script>
<script src="../js/app.js"></script>
<script src="../js/components.js"></script>
</body>
</html>
